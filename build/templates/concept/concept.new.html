<header class="concept-header">
    <span>Create a new concept</span>
</header>

<section>
    <form name="conceptNewForm" ng-submit="submitNewConcept(conceptNewForm.$valid)" novalidate>
        <fieldset class="conceptNewForm">

            <div class="field">
                <label for="conceptName">Concept Name</label>
                <input
                    name="conceptName"
                    type="text"
                    id="conceptName"
                    placeholder="Enter a concept name"
                    ng-model="form.conceptName"
                    autocapitalize="off"
                    autocorrect="off"
                    autofocus="autofocus"
                    required
                />
                <!-- <div ng-messages="conceptNewForm.conceptName.$error" ng-if="conceptNewForm.conceptName.$dirty">
                    <small ng-message="required" class="error">A concept name is required.</small>
                </div> -->
            </div> <!-- /.field -->

            <div class="field">
                <label for="Categories">Categories</label>
                <input
                    name="Categories"
                    type="text"
                    id="Categories"
                    placeholder="Enter the concept display name"
                    ng-model="form.categories"
                    autocapitalize="off"
                    autocorrect="off"
                    autofocus="autofocus"
                    required
                />
            </div> <!-- /.field -->

            <div id="field">
                <label for="select">GEO Coordinates</label>
                <input
                    id="map-autocomplete"
                    placeholder="Autocomplete: Enter a place"
                    ng-model="form.geoCoordinates"
                    type="text"
                    autofocus="autofocus"></input>
            </div>

            <div class="field related-forms" data-ng-repeat="associatedform in form.associatedForms"> <!-- TODO Make these into form directives -->
                <label for="associatedform" ng-show="$first">Associated Forms</label>
                <!-- <section>
                    <span>Last entry for the form is always the same as the concept name. Disabled for editing.</span>
                </section> -->
                <input type="text"
                    class="related-forms-item"
                    ng-model="associatedform.name"
                    name="associatedForm"
                    placeholder="Enter a form"
                    autocapitalize="off"
                    autocorrect="off"
                    autofocus="autofocus"
                    required>
                <button class="delete-button" type="button" type="value" ng-click="deleteForm(associatedform)">-</button>
            </div> <!-- /.field -->

            <div class="field related-forms"> <!-- The default form is the concept name. TODO include an extra field to start with an additional form -->
                <label for="associatedform" ng-show="form.associatedForms.length === 0">Associated Forms</label>
                <input
                    class="related-forms-item"
                    name="relatedForms"
                    type="text"
                    id="relatedForms"
                    placeholder="Disabled: same as concept name"
                    ng-model="form.conceptName"
                    autocapitalize="off"
                    autocorrect="off"
                    autofocus="autofocus"
                    required
                    disabled
                />
                <button type="button" ng-click="addForm()">+</button> <!-- TODO ng-click="addForm()" -->
            </div> <!-- /.field -->

            <div class="field related-concepts" data-ng-repeat="relatedConcept in form.relatedConcepts">
                <label for="relatedConcept" ng-show="$first">Related Concepts</label>
                <input type="text"
                    class="related-concepts-item"
                    ng-model="relatedConcept.name"
                    name="relatedConcept"
                    placeholder="Enter the concept display name"
                    autocapitalize="off"
                    autocorrect="off"
                    autofocus="autofocus"
                    required>
                <button class="delete-button" type="button" type="value" ng-show="!$last" ng-click="deleteConcept(relatedConcept)">-</button>
                <button type="button" type="value" ng-show="$last" ng-click="addConcept(relatedConcept)">+</button>
            </div> <!-- /.field -->

            <!-- <div class="field related-concepts">
                <label for="RelatedConcepts">Related Concepts</label>
                <input
                    class="related-concepts-item"
                    name="RelatedConcepts"
                    type="text"
                    id="RelatedConcepts"
                    placeholder="Enter the concept display name"
                    ng-model="form.relatedConcepts"
                    autocapitalize="off"
                    autocorrect="off"
                    autofocus="autofocus"
                    required
                />
                <button>+</button>
            </div> -->

            <div class="field">
                <label for="select">Concept Type</label>
                <select class="global-date-selector custom"
                    ng-model="form.entity"
                    ng-options="entityType.name for entityType in supportedEntities"
                    required
                    ></select>
            </div>

            <div class="field" ng-if="form.entity.name === 'Event'">
                <div class="field">
                    <label for="eventName">Event Name</label>
                    <input
                        name="eventName"
                        type="text"
                        id="eventName"
                        placeholder="Enter the event name"
                        ng-model="form.eventName"
                        autocapitalize="off"
                        autocorrect="off"
                        autofocus="autofocus"
                    />
                </div> <!-- /.field -->
            </div>

            <div class="field">
                <label for="select">Is Block Listed?</label>
                <select class="global-date-selector custom"
                    ng-model="form.blocked"
                    ng-options="blockType.name for blockType in blockedTypes"
                    required
                    ></select>
            </div>

            <div class="button-bar group">

                <div class="small-6">
                    <div class="row">
                        <div class="large-3 medium-5 columns">
                            <input
                                id="btn-submit"
                                type="submit"
                                value="Submit"
                                ng-disabled="conceptNewForm.$invalid"
                                class="button"
                            >
                        </div>
                    </div>
                </div>

            </div>

        </fieldset>
    </form>
</section>

<!--
TODO

Concept:

Name
Categories
GEO Coordinates
Concept Type
Is Block Listed

Form:

Name
Number of occurrences
Number of times linked
Linked probability

Form to Concept link:

Sense probability
Number of occurrences

-->
