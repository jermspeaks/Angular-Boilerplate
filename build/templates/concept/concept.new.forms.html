<div id="field">
  <label for="associatedform">Associated Forms</label>

  <div class="field related-forms" data-ng-repeat="associatedform in form.forms">
    <div ng-init="associatedform.associatedFormName='aFormName'+$index"></div>
    <div ng-init="associatedform.occurrenceCountName='oCount'+$index"></div>
    <div ng-init="associatedform.linkCountName='lCount'+$index"></div>
    <div ng-init="associatedform.linkedProbabilityName='lProb'+$index"></div>
    <fieldset class="form-field">
      <label ng-if="associatedform.tag" for="associatedform">Form Name (Default)</label>
      <label ng-if="!associatedform.tag" for="associatedform">Form Name</label>

      <!-- Default Form form.attributes.conceptName -->
      <input ng-if="associatedform.tag"
        type="text"
        class="related-forms-item"
        ng-model="associatedform.name"
        name="associatedForm"
        placeholder="Disabled: same as concept name"
        autocapitalize="off"
        autocorrect="off"
        autofocus="autofocus"
        disabled />

      <input ng-if="!associatedform.tag"
        type="text"
        class="related-forms-item"
        ng-model="associatedform.name"
        name="{{associatedform.associatedFormName}}"
        placeholder="Enter a form"
        autocapitalize="off"
        autocorrect="off"
        autofocus="autofocus"
        required />

      <div class="ng-messages" ng-messages="conceptNewForm[associatedform.associatedFormName].$error" ng-if="conceptNewForm[associatedform.associatedFormName].$dirty && conceptNewForm[associatedform.associatedFormName].$invalid">
        <div ng-message="required">A form name is required.</div>
      </div>

      <label for="occurrenceCount">Number of occurrences</label>
      <input type="number"
        class="related-forms-item"
        ng-model="associatedform.occurenceCount"
        name="{{associatedform.occurrenceCountName}}"
        placeholder=""
        autocapitalize="off"
        autocorrect="off"
        autofocus="autofocus"
        required />

      <div class="ng-messages" ng-messages="conceptNewForm[associatedform.occurrenceCountName].$error" ng-if="conceptNewForm[associatedform.occurrenceCountName].$dirty && conceptNewForm[associatedform.occurrenceCountName].$invalid">
        <div ng-message="required">A number of occurrences is required.</div>
      </div>

      <label for="associatedform">Number of times linked</label>
      <input type="number"
        class="related-forms-item"
        ng-model="associatedform.linkedCount"
        name="{{associatedform.linkCountName}}"
        placeholder=""
        autocapitalize="off"
        autocorrect="off"
        autofocus="autofocus"
        required />
      <div class="ng-messages" ng-messages="conceptNewForm[associatedform.linkCountName].$error" ng-if="conceptNewForm[associatedform.linkCountName].$dirty && conceptNewForm[associatedform.linkCountName].$invalid">
        <div ng-message="required">Linked Count is required.</div>
      </div>

      <label for="associatedform">Linked probability</label>
      <input type="number"
        class="related-forms-item"
        ng-model="associatedform.linkedProbability"
        name="{{associatedform.linkedProbabilityName}}"
        placeholder=""
        autocapitalize="off"
        autocorrect="off"
        autofocus="autofocus"
        required />
      <div class="ng-messages" ng-messages="conceptNewForm[associatedform.linkedProbabilityName].$error" ng-if="conceptNewForm[associatedform.linkedProbabilityName].$dirty && conceptNewForm[associatedform.linkedProbabilityName].$invalid">
        <div ng-message="required">Linked probability is required.</div>
      </div>

    </fieldset>
    <button class="add-form-button sm-button" type="button" ng-click="form.addForm()">+</button>
    <button class="delete-button delete-form-button sm-button"
      ng-if="!associatedform.tag"
      type="button"
      type="value"
      ng-click="form.deleteForm(associatedform)">-</button>
  </div>
</div>
